'use strict';Object.defineProperty(exports,'__esModule',{value:!0}),exports.default={install:function h(a,b){var c=function(a){return'IMG'===a.tagName?a:(a.image=new Image,a.image)},d=function(a){var b=a.dataset.lazyLoad,d=c(a);d.src=b,d.onload=function(){return e(a)}},e=function(a){var b=a.dataset.lazyLoad;'VIDEO'===a.tagName?a.poster=b:'IMG'!==a.tagName&&(a.style.backgroundImage='url('+b+')'),a.classList.add('loaded'),g.unobserve(a)},f=Object.assign({root:null,rootMargin:'0px',threshold:[0,1]},b),g=new IntersectionObserver(function b(a){a.forEach(function(a){a.isIntersecting&&d(a.target)})},f);a.directive('lazy',{mounted:function c(a,b){a.dataset.lazyLoad=b.value,a.classList.add('lazy'),g.observe(a)},updated:function c(a,b){b.oldValue===b.value||(a.dataset.lazyLoad=b.value,a.classList.remove('loaded'),g.observe(a))},beforeUnmount:function b(a){a.image&&(a.image=null)}})}};
