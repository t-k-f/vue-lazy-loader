'use strict';Object.defineProperty(exports,'__esModule',{value:!0});var _vue=require('vue'),_vue2=_interopRequireDefault(_vue);function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}var fetch=function(a,b,c){var d='string'==typeof b.value?b.value:b.value.src;a.image.onload=function(){return a.classList.add('loaded'),'img'===c.tag?void(a.src=d):'video'===c.tag?void a.setAttribute('poster',d):void(a.style.backgroundImage='url('+d+')')},a.image.src=d,a.init=!0},isCurrent=function(a,b){return a.init?'string'==typeof b.value?b.value===b.oldValue:b.value.src===b.oldValue.src:void 0},isReveal=function(a,b){var c=b.value;if(a.reveal)return!0;if('string'==typeof c)return a.reveal=!0,!0;if('undefined'==typeof c.src)throw'src key is missing';if('undefined'==typeof c.reveal||c.reveal){if('number'==typeof c.scroll&&'undefined'==typeof c.vh)throw'vh key is missing';if('undefined'==typeof c.scroll&&'number'==typeof c.vh)throw'scroll key is missing';if('number'==typeof c.scroll&&'number'==typeof c.vh){var d='number'==typeof c.offset?1-c.offset:1;return a.getBoundingClientRect().y<c.vh*d?(a.reveal=!0,!0):void 0}return a.reveal=!0,!0}};exports.default={bind:function bind(a){a.classList.add('lazy'),a.image=new Image},inserted:function inserted(a,b,c){isReveal(a,b)&&fetch(a,b,c)},update:function update(a,b,c){isReveal(a,b)&&(isCurrent(a,b,c)||(a.classList.remove('loaded'),fetch(a,b,c)))},unbind:function unbind(a){a.image.src='',a.image=null}};
