'use strict';Object.defineProperty(exports,'__esModule',{value:!0});var _vue=require('vue'),_vue2=_interopRequireDefault(_vue);function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}var fetch=function(a,b,c){a.image.onload=function(){return a.classList.add('loaded'),'img'===c.tag?void(a.src=b):'video'===c.tag?void a.setAttribute('poster',b):void(a.style.backgroundImage='url('+b+')')},a.image.src=b},isCurrent=function(a,b,c){var d=normalizeUrl(b);return'img'===c.tag?normalizeUrl(a.src)===d:'video'===c.tag?normalizeUrl(a.getAttribute('poster'))===d:normalizeUrl(a.style.backgroundImage.slice(5,-2))===d},normalizeUrl=function(a){return a.replace(/(^\w+:|^)\/\//,'')},isReveal=function(a,b){var c=b.value;if('string'==typeof c)return!0;if('undefined'==typeof c.src)throw'src key is missing';if('undefined'==typeof c.reveal||c.reveal){if('number'==typeof c.scroll&&'undefined'==typeof c.vh)throw'vh key is missing';if('undefined'==typeof c.scroll&&'number'==typeof c.vh)throw'scroll key is missing';if('number'==typeof c.scroll&&'number'==typeof c.vh){var d='number'==typeof c.offset?1-c.offset:1;return a.getBoundingClientRect().y<c.vh*d}return!0}},isObj=function(a){return'string'==typeof a.value?a.value:a.value.src};exports.default={bind:function bind(a){a.classList.add('lazy'),a.image=new Image},inserted:function inserted(a,b,c){isReveal(a,b)&&fetch(a,isObj(b),c)},update:function update(a,b,c){isReveal(a,b)&&(isCurrent(a,isObj(b),c)||(a.classList.remove('loaded'),fetch(a,isObj(b),c)))},unbind:function unbind(a){a.image.src='',a.image=null}};
