'use strict';Object.defineProperty(exports,'__esModule',{value:!0});var _vue=require('vue'),_vue2=_interopRequireDefault(_vue);function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}var fetch=function(a,b,c){return a.onload=function(){a.classList.add('loaded')},a.image.onload=function(){return'video'===c.tag?void a.setAttribute('poster',b):void(a.style.backgroundImage='url('+b+')')},'img'===c.tag?void(a.src=b):void(a.image.src=b)},isCurrent=function(a,b){return a.image.src||a.src?'string'==typeof b.value?b.value===b.oldValue:b.value.src===b.oldValue.src:void 0},isReveal=function(a,b){var c=b.value;if('string'==typeof c)return!0;if('undefined'==typeof c.src)throw'src key is missing';if('undefined'==typeof c.reveal||c.reveal){if('number'==typeof c.scroll&&'undefined'==typeof c.vh)throw'vh key is missing';if('undefined'==typeof c.scroll&&'number'==typeof c.vh)throw'scroll key is missing';if('number'==typeof c.scroll&&'number'==typeof c.vh){var d='number'==typeof c.offset?1-c.offset:1;return(a.getBoundingClientRect().y||a.getBoundingClientRect().top)<c.vh*d}return!0}},getImageUrl=function(a){return'string'==typeof a.value?a.value:a.value.src};exports.default={bind:function b(a){a.classList.add('lazy'),a.image=new Image},inserted:function d(a,b,c){isReveal(a,b)&&fetch(a,getImageUrl(b),c)},update:function d(a,b,c){isReveal(a,b)&&(isCurrent(a,b)||(a.classList.remove('loaded'),fetch(a,getImageUrl(b),c)))},unbind:function b(a){a.image.src='',a.image=null}};
